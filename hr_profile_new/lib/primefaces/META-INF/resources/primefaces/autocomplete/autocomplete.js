PrimeFaces.widget.AutoComplete=function(c,b){this.id=c;this.cfg=b;this.jqId=PrimeFaces.escapeClientId(c);this.jq=jQuery(this.jqId+"_input");this.jqh=jQuery(this.jqId+"_hinput");this.setupDataSource();this.jq.autocomplete(this.cfg);var a=this;this.jq.bind("autocompleteselect",function(d,e){a.onItemSelect(d,e)});if(this.cfg.forceSelection){this.setupForceSelection()}if(this.cfg.pojo){this.jq.keyup(function(d){if(d.keyCode!=13){jQuery(a.jqh).val(jQuery(this).val())}})}if(this.cfg.behaviors){PrimeFaces.attachBehaviors(this.jq,this.cfg.behaviors)}PrimeFaces.skinInput(this.jq)};PrimeFaces.widget.AutoComplete.prototype.setupDataSource=function(){var a=this;this.cfg.source=function(d,b){if(a.cfg.onstart){a.cfg.onstart.call(a,d)}var c={source:a.id,process:a.id,update:a.id,formId:a.cfg.formId,onsuccess:function(l){var j=l.documentElement,k=j.getElementsByTagName("update");for(var g=0;g<k.length;g++){var m=k[g].attributes.getNamedItem("id").nodeValue,h=k[g].firstChild.data;if(m==a.id){var f=jQuery.parseJSON(h).results;if(a.cfg.oncomplete){a.cfg.oncomplete.call(a,f)}if(a.cfg.maxResults<f.length){f=f.slice(0,a.cfg.maxResults)}if(a.cfg.forceSelection){a.cachedResults=f}b(f)}else{PrimeFaces.ajax.AjaxUtils.updateElement(m,h)}}return false}};var e={};e[a.id+"_query"]=d.term;PrimeFaces.ajax.AjaxRequest(a.cfg.url,c,e)}};PrimeFaces.widget.AutoComplete.prototype.onItemSelect=function(b,c){if(this.cfg.pojo){this.jqh.val(c.item.data)}else{this.jq.val(c.item.label)}if(this.cfg.ajaxSelect){var a={source:this.id,process:this.id,formId:this.cfg.formId};if(this.cfg.onSelectUpdate){a.update=this.cfg.onSelectUpdate}var d={};d[this.id+"_ajaxSelect"]=true;PrimeFaces.ajax.AjaxRequest(this.cfg.url,a,d)}};PrimeFaces.widget.AutoComplete.prototype.setupForceSelection=function(){var a=this;this.jq.blur(function(){var d=jQuery(this).val(),c=false;if(a.cachedResults){for(var b=0;b<a.cachedResults.length;b++){if(a.cachedResults[b].label==d){c=true;break}}}if(!c){jQuery(this).val("")}})};PrimeFaces.widget.AutoComplete.prototype.disable=function(){this.jq.addClass("ui-state-disabled").attr("disabled","disabled").autocomplete("disable")};PrimeFaces.widget.AutoComplete.prototype.enable=function(){this.jq.removeClass("ui-state-disabled").removeAttr("disabled").autocomplete("enable")};PrimeFaces.widget.AutoComplete.prototype.search=function(a){this.jq.autocomplete("search",a)};PrimeFaces.widget.AutoComplete.prototype.close=function(){this.jq.autocomplete("close")};PrimeFaces.widget.AutoComplete.prototype.deactivate=function(){this.jq.autocomplete("disable")};PrimeFaces.widget.AutoComplete.prototype.activate=function(){this.jq.autocomplete("enable")};